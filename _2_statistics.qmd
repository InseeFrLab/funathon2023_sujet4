##Â 2. Faire des statistiques agrÃ©gÃ©es par catÃ©gories

Cette partie permet de calculer en amont de l'application des
statistiques descriptives qui pourront Ãªtre utilisÃ©es
par celle-ci. 

Il est prÃ©fÃ©rable de minimiser la quantitÃ© de calculs
faits Ã  la volÃ©e dans le cadre d'une application. Sinon,
le risque est une latence embÃªtante pour l'utilisateur
voire un crash du serveur Ã  cause de besoins
de ressources trop importants.

Cette partie propose ainsi de crÃ©er en avance deux
bases de donnÃ©es synthÃ©tisant certaines statistiques
descriptives:

- Pour les variables nutritionnelles (calories, glucides, etc.), les
dÃ©ciles de la distribution. Ils permettront de placer notre produit
par rapport Ã  des produits similaires (ceux partageant la mÃªme variable
de catÃ©gorie, crÃ©Ã©e prÃ©cÃ©demment). 
- Pour les notes synthÃ©tiques (nutriscore, score nova et Ã©coscore), le
nombre de produits dans une catÃ©gorie donnÃ©e (par exemple les
fromages Ã  pate crue) qui ont la mÃªme note.

### PrÃ©liminaire (ğŸŸ¡,ğŸŸ¢,ğŸ”µ,ğŸ”´,âš«)


Sur le plan technique, cette partie propose deux cadres de manipulation
de donnÃ©es diffÃ©rents,
selon le balisage de la voie:

- ğŸŸ¡,ğŸŸ¢,ğŸ”µ: utilisation de `Pandas`
- ğŸ”´,âš«: requÃªtes SQL directement sur le fichier `Parquet` grÃ¢ce Ã  `DuckDB`


Cette partie peut Ãªtre faite sans avoir suivie la prÃ©cÃ©dente. 
Il est alors recommandÃ© d'effectuer deux actions:

1. Dans le fichier `config.yaml`, remplacer `"projet-funathon"` par votre nom
d'utilisateur sur le `SSP Cloud`
2. Utiliser la commande suivante pour copier le fichier d'exemple mis Ã  disposition 
vers votre espace personnel :

```{python}
#| eval: false
!mc cp s3/projet-funathon/2023/sujet4/diffusion/openfood.parquet s3/<USERNAME_SSPCLOUD>/2023/sujet4/diffusion/openfood.parquet
```

en remplacant `<USERNAME_SSPCLOUD>` par votre nom d'utilisateur sur le SSPCloud. 
